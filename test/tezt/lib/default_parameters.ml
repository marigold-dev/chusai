(* FIXME: use lib_parameter/gen *)

let from_protocol p c =
  match p, c with
  | Protocol.Ithaca, Protocol.Constants_sandbox ->
    {itk|
    { "bootstrap_accounts":
    [ [ "edpkuBknW28nW72KG6RoHtYW7p12T6GKc7nAbwYX5m8Wd9sDVC9yav",
        "4000000000000" ],
      [ "edpktzNbDAUjUk697W7gYg2CRuBQjyPxbEg8dLccYYwKSKvkPvjtV9",
        "4000000000000" ],
      [ "edpkuTXkJDGcFd5nh6VvMz8phXxU3Bi7h6hqgywNFi1vZTfQNnS1RV",
        "4000000000000" ],
      [ "edpkuFrRoDSEbJYgxRtLx2ps82UdaYc1WwfS9sE11yhauZt5DgCHbU",
        "4000000000000" ],
      [ "edpkv8EUUH68jmo3f7Um5PezmfGrRF24gnfLpH3sVNwJnV5bVCxL2n",
        "4000000000000" ] ], "preserved_cycles": 2, "blocks_per_cycle": 8,
  "blocks_per_commitment": 4, "blocks_per_stake_snapshot": 4,
  "blocks_per_voting_period": 64, "hard_gas_limit_per_operation": "1040000",
  "hard_gas_limit_per_block": "5200000", "proof_of_work_threshold": "-1",
  "tokens_per_roll": "6000000000", "seed_nonce_revelation_tip": "125000",
  "origination_size": 257, "baking_reward_fixed_portion": "333333",
  "baking_reward_bonus_per_slot": "3921",
  "endorsing_reward_per_slot": "2604", "cost_per_byte": "250",
  "hard_storage_limit_per_operation": "60000", "quorum_min": 2000,
  "quorum_max": 7000, "min_proposal_quorum": 500,
  "liquidity_baking_subsidy": "2500000",
  "liquidity_baking_sunset_level": 128,
  "liquidity_baking_escape_ema_threshold": 666667,
  "max_operations_time_to_live": 120, "minimal_block_delay": "1",
  "delay_increment_per_round": "1", "consensus_committee_size": 256,
  "consensus_threshold": 0,
  "minimal_participation_ratio": { "numerator": 2, "denominator": 3 },
  "max_slashing_period": 2, "frozen_deposits_percentage": 5,
  "double_baking_punishment": "640000000",
  "ratio_of_frozen_deposits_slashed_per_double_endorsement":
    { "numerator": 1, "denominator": 2 } }
  |itk}
  | Protocol.Ithaca, Protocol.Constants_mainnet ->
    {itk|
{ "bootstrap_accounts":
    [ [ "edpkuBknW28nW72KG6RoHtYW7p12T6GKc7nAbwYX5m8Wd9sDVC9yav",
        "4000000000000" ],
      [ "edpktzNbDAUjUk697W7gYg2CRuBQjyPxbEg8dLccYYwKSKvkPvjtV9",
        "4000000000000" ],
      [ "edpkuTXkJDGcFd5nh6VvMz8phXxU3Bi7h6hqgywNFi1vZTfQNnS1RV",
        "4000000000000" ],
      [ "edpkuFrRoDSEbJYgxRtLx2ps82UdaYc1WwfS9sE11yhauZt5DgCHbU",
        "4000000000000" ],
      [ "edpkv8EUUH68jmo3f7Um5PezmfGrRF24gnfLpH3sVNwJnV5bVCxL2n",
        "4000000000000" ] ], "preserved_cycles": 5, "blocks_per_cycle": 8192,
  "blocks_per_commitment": 64, "blocks_per_stake_snapshot": 512,
  "blocks_per_voting_period": 40960,
  "hard_gas_limit_per_operation": "1040000",
  "hard_gas_limit_per_block": "5200000",
  "proof_of_work_threshold": "70368744177663",
  "tokens_per_roll": "6000000000", "seed_nonce_revelation_tip": "125000",
  "origination_size": 257, "baking_reward_fixed_portion": "10000000",
  "baking_reward_bonus_per_slot": "4286",
  "endorsing_reward_per_slot": "2857", "cost_per_byte": "250",
  "hard_storage_limit_per_operation": "60000", "quorum_min": 2000,
  "quorum_max": 7000, "min_proposal_quorum": 500,
  "liquidity_baking_subsidy": "2500000",
  "liquidity_baking_sunset_level": 3063809,
  "liquidity_baking_escape_ema_threshold": 666667,
  "max_operations_time_to_live": 120, "minimal_block_delay": "30",
  "delay_increment_per_round": "15", "consensus_committee_size": 7000,
  "consensus_threshold": 4667,
  "minimal_participation_ratio": { "numerator": 2, "denominator": 3 },
  "max_slashing_period": 2, "frozen_deposits_percentage": 10,
  "double_baking_punishment": "640000000",
  "ratio_of_frozen_deposits_slashed_per_double_endorsement":
    { "numerator": 1, "denominator": 2 } }
  |itk}
  | Protocol.Ithaca, Protocol.Constants_test ->
    {itk|
    { "bootstrap_accounts":
    [ [ "edpkuBknW28nW72KG6RoHtYW7p12T6GKc7nAbwYX5m8Wd9sDVC9yav",
        "4000000000000" ],
      [ "edpktzNbDAUjUk697W7gYg2CRuBQjyPxbEg8dLccYYwKSKvkPvjtV9",
        "4000000000000" ],
      [ "edpkuTXkJDGcFd5nh6VvMz8phXxU3Bi7h6hqgywNFi1vZTfQNnS1RV",
        "4000000000000" ],
      [ "edpkuFrRoDSEbJYgxRtLx2ps82UdaYc1WwfS9sE11yhauZt5DgCHbU",
        "4000000000000" ],
      [ "edpkv8EUUH68jmo3f7Um5PezmfGrRF24gnfLpH3sVNwJnV5bVCxL2n",
        "4000000000000" ] ],
  "commitments":
    [ [ "btz1bRL4X5BWo2Fj4EsBdUwexXqgTf75uf1qa", "23932454669343" ],
      [ "btz1SxjV1syBgftgKy721czKi3arVkVwYUFSv", "72954577464032" ],
      [ "btz1LtoNCjiW23txBTenALaf5H6NKF1L3c1gw", "217487035428348" ],
      [ "btz1SUd3mMhEBcWudrn8u361MVAec4WYCcFoy", "4092742372031" ],
      [ "btz1MvBXf4orko1tsGmzkjLbpYSgnwUjEe81r", "17590039016550" ],
      [ "btz1LoDZ3zsjgG3k3cqTpUMc9bsXbchu9qMXT", "26322312350555" ],
      [ "btz1RMfq456hFV5AeDiZcQuZhoMv2dMpb9hpP", "244951387881443" ],
      [ "btz1Y9roTh4A7PsMBkp8AgdVFrqUDNaBE59y1", "80065050465525" ],
      [ "btz1Q1N2ePwhVw5ED3aaRVek6EBzYs1GDkSVD", "3569618927693" ],
      [ "btz1VFFVsVMYHd5WfaDTAt92BeQYGK8Ri4eLy", "9034781424478" ] ],
  "preserved_cycles": 2, "blocks_per_cycle": 8, "blocks_per_commitment": 4,
  "blocks_per_stake_snapshot": 4, "blocks_per_voting_period": 64,
  "hard_gas_limit_per_operation": "1040000",
  "hard_gas_limit_per_block": "5200000", "proof_of_work_threshold": "-1",
  "tokens_per_roll": "6000000000", "seed_nonce_revelation_tip": "125000",
  "origination_size": 257, "baking_reward_fixed_portion": "333333",
  "baking_reward_bonus_per_slot": "3921",
  "endorsing_reward_per_slot": "2604", "cost_per_byte": "250",
  "hard_storage_limit_per_operation": "60000", "quorum_min": 2000,
  "quorum_max": 7000, "min_proposal_quorum": 500,
  "liquidity_baking_subsidy": "2500000",
  "liquidity_baking_sunset_level": 128,
  "liquidity_baking_escape_ema_threshold": 666667,
  "max_operations_time_to_live": 120, "minimal_block_delay": "1",
  "delay_increment_per_round": "1", "consensus_committee_size": 256,
  "consensus_threshold": 0,
  "minimal_participation_ratio": { "numerator": 2, "denominator": 3 },
  "max_slashing_period": 2, "frozen_deposits_percentage": 5,
  "double_baking_punishment": "640000000",
  "ratio_of_frozen_deposits_slashed_per_double_endorsement":
    { "numerator": 1, "denominator": 2 } }
  |itk}
  | Protocol.Jakarta, Protocol.Constants_sandbox ->
    {jkt|
{ "bootstrap_accounts":
    [ [ "edpkuBknW28nW72KG6RoHtYW7p12T6GKc7nAbwYX5m8Wd9sDVC9yav",
        "4000000000000" ],
      [ "edpktzNbDAUjUk697W7gYg2CRuBQjyPxbEg8dLccYYwKSKvkPvjtV9",
        "4000000000000" ],
      [ "edpkuTXkJDGcFd5nh6VvMz8phXxU3Bi7h6hqgywNFi1vZTfQNnS1RV",
        "4000000000000" ],
      [ "edpkuFrRoDSEbJYgxRtLx2ps82UdaYc1WwfS9sE11yhauZt5DgCHbU",
        "4000000000000" ],
      [ "edpkv8EUUH68jmo3f7Um5PezmfGrRF24gnfLpH3sVNwJnV5bVCxL2n",
        "4000000000000" ] ], "preserved_cycles": 2, "blocks_per_cycle": 8,
  "blocks_per_commitment": 4, "blocks_per_stake_snapshot": 4,
  "cycles_per_voting_period": 8, "hard_gas_limit_per_operation": "1040000",
  "hard_gas_limit_per_block": "5200000", "proof_of_work_threshold": "-1",
  "tokens_per_roll": "6000000000", "seed_nonce_revelation_tip": "125000",
  "origination_size": 257, "baking_reward_fixed_portion": "333333",
  "baking_reward_bonus_per_slot": "3921",
  "endorsing_reward_per_slot": "2604", "cost_per_byte": "250",
  "hard_storage_limit_per_operation": "60000", "quorum_min": 2000,
  "quorum_max": 7000, "min_proposal_quorum": 500,
  "liquidity_baking_subsidy": "2500000",
  "liquidity_baking_sunset_level": 128,
  "liquidity_baking_toggle_ema_threshold": 1000000000,
  "max_operations_time_to_live": 120, "minimal_block_delay": "1",
  "delay_increment_per_round": "1", "consensus_committee_size": 256,
  "consensus_threshold": 0,
  "minimal_participation_ratio": { "numerator": 2, "denominator": 3 },
  "max_slashing_period": 2, "frozen_deposits_percentage": 5,
  "double_baking_punishment": "640000000",
  "ratio_of_frozen_deposits_slashed_per_double_endorsement":
    { "numerator": 1, "denominator": 2 }, "cache_script_size": 100000000,
  "cache_stake_distribution_cycles": 8, "cache_sampler_state_cycles": 8,
  "tx_rollup_enable": true, "tx_rollup_origination_size": 4000,
  "tx_rollup_hard_size_limit_per_inbox": 500000,
  "tx_rollup_hard_size_limit_per_message": 5000,
  "tx_rollup_max_withdrawals_per_batch": 15,
  "tx_rollup_commitment_bond": "10000000000",
  "tx_rollup_finality_period": 40000, "tx_rollup_withdraw_period": 40000,
  "tx_rollup_max_inboxes_count": 40100,
  "tx_rollup_max_messages_per_inbox": 1010,
  "tx_rollup_max_commitments_count": 80100,
  "tx_rollup_cost_per_byte_ema_factor": 120,
  "tx_rollup_max_ticket_payload_size": 2048,
  "tx_rollup_rejection_max_proof_size": 30000,
  "tx_rollup_sunset_level": 3473409, "sc_rollup_enable": false,
  "sc_rollup_origination_size": 6314,
  "sc_rollup_challenge_window_in_blocks": 20160,
  "sc_rollup_max_available_messages": 1000000 }
  |jkt}
  | Protocol.Jakarta, Protocol.Constants_mainnet ->
    {jkt|
{ "bootstrap_accounts":
    [ [ "edpkuBknW28nW72KG6RoHtYW7p12T6GKc7nAbwYX5m8Wd9sDVC9yav",
        "4000000000000" ],
      [ "edpktzNbDAUjUk697W7gYg2CRuBQjyPxbEg8dLccYYwKSKvkPvjtV9",
        "4000000000000" ],
      [ "edpkuTXkJDGcFd5nh6VvMz8phXxU3Bi7h6hqgywNFi1vZTfQNnS1RV",
        "4000000000000" ],
      [ "edpkuFrRoDSEbJYgxRtLx2ps82UdaYc1WwfS9sE11yhauZt5DgCHbU",
        "4000000000000" ],
      [ "edpkv8EUUH68jmo3f7Um5PezmfGrRF24gnfLpH3sVNwJnV5bVCxL2n",
        "4000000000000" ] ], "preserved_cycles": 5, "blocks_per_cycle": 8192,
  "blocks_per_commitment": 64, "blocks_per_stake_snapshot": 512,
  "cycles_per_voting_period": 5, "hard_gas_limit_per_operation": "1040000",
  "hard_gas_limit_per_block": "5200000",
  "proof_of_work_threshold": "70368744177663",
  "tokens_per_roll": "6000000000", "seed_nonce_revelation_tip": "125000",
  "origination_size": 257, "baking_reward_fixed_portion": "10000000",
  "baking_reward_bonus_per_slot": "4286",
  "endorsing_reward_per_slot": "2857", "cost_per_byte": "250",
  "hard_storage_limit_per_operation": "60000", "quorum_min": 2000,
  "quorum_max": 7000, "min_proposal_quorum": 500,
  "liquidity_baking_subsidy": "2500000",
  "liquidity_baking_sunset_level": 3063809,
  "liquidity_baking_toggle_ema_threshold": 1000000000,
  "max_operations_time_to_live": 120, "minimal_block_delay": "30",
  "delay_increment_per_round": "15", "consensus_committee_size": 7000,
  "consensus_threshold": 4667,
  "minimal_participation_ratio": { "numerator": 2, "denominator": 3 },
  "max_slashing_period": 2, "frozen_deposits_percentage": 10,
  "double_baking_punishment": "640000000",
  "ratio_of_frozen_deposits_slashed_per_double_endorsement":
    { "numerator": 1, "denominator": 2 }, "cache_script_size": 100000000,
  "cache_stake_distribution_cycles": 8, "cache_sampler_state_cycles": 8,
  "tx_rollup_enable": true, "tx_rollup_origination_size": 4000,
  "tx_rollup_hard_size_limit_per_inbox": 500000,
  "tx_rollup_hard_size_limit_per_message": 5000,
  "tx_rollup_max_withdrawals_per_batch": 15,
  "tx_rollup_commitment_bond": "10000000000",
  "tx_rollup_finality_period": 40000, "tx_rollup_withdraw_period": 40000,
  "tx_rollup_max_inboxes_count": 40100,
  "tx_rollup_max_messages_per_inbox": 1010,
  "tx_rollup_max_commitments_count": 80100,
  "tx_rollup_cost_per_byte_ema_factor": 120,
  "tx_rollup_max_ticket_payload_size": 2048,
  "tx_rollup_rejection_max_proof_size": 30000,
  "tx_rollup_sunset_level": 3473409, "sc_rollup_enable": false,
  "sc_rollup_origination_size": 6314,
  "sc_rollup_challenge_window_in_blocks": 20160,
  "sc_rollup_max_available_messages": 1000000 }
  |jkt}
  | Protocol.Jakarta, Protocol.Constants_test ->
    {jkt|
{ "bootstrap_accounts":
    [ [ "edpkuBknW28nW72KG6RoHtYW7p12T6GKc7nAbwYX5m8Wd9sDVC9yav",
        "4000000000000" ],
      [ "edpktzNbDAUjUk697W7gYg2CRuBQjyPxbEg8dLccYYwKSKvkPvjtV9",
        "4000000000000" ],
      [ "edpkuTXkJDGcFd5nh6VvMz8phXxU3Bi7h6hqgywNFi1vZTfQNnS1RV",
        "4000000000000" ],
      [ "edpkuFrRoDSEbJYgxRtLx2ps82UdaYc1WwfS9sE11yhauZt5DgCHbU",
        "4000000000000" ],
      [ "edpkv8EUUH68jmo3f7Um5PezmfGrRF24gnfLpH3sVNwJnV5bVCxL2n",
        "4000000000000" ] ],
  "commitments":
    [ [ "btz1bRL4X5BWo2Fj4EsBdUwexXqgTf75uf1qa", "23932454669343" ],
      [ "btz1SxjV1syBgftgKy721czKi3arVkVwYUFSv", "72954577464032" ],
      [ "btz1LtoNCjiW23txBTenALaf5H6NKF1L3c1gw", "217487035428348" ],
      [ "btz1SUd3mMhEBcWudrn8u361MVAec4WYCcFoy", "4092742372031" ],
      [ "btz1MvBXf4orko1tsGmzkjLbpYSgnwUjEe81r", "17590039016550" ],
      [ "btz1LoDZ3zsjgG3k3cqTpUMc9bsXbchu9qMXT", "26322312350555" ],
      [ "btz1RMfq456hFV5AeDiZcQuZhoMv2dMpb9hpP", "244951387881443" ],
      [ "btz1Y9roTh4A7PsMBkp8AgdVFrqUDNaBE59y1", "80065050465525" ],
      [ "btz1Q1N2ePwhVw5ED3aaRVek6EBzYs1GDkSVD", "3569618927693" ],
      [ "btz1VFFVsVMYHd5WfaDTAt92BeQYGK8Ri4eLy", "9034781424478" ] ],
  "preserved_cycles": 2, "blocks_per_cycle": 8, "blocks_per_commitment": 4,
  "blocks_per_stake_snapshot": 4, "cycles_per_voting_period": 8,
  "hard_gas_limit_per_operation": "1040000",
  "hard_gas_limit_per_block": "5200000", "proof_of_work_threshold": "-1",
  "tokens_per_roll": "6000000000", "seed_nonce_revelation_tip": "125000",
  "origination_size": 257, "baking_reward_fixed_portion": "333333",
  "baking_reward_bonus_per_slot": "3921",
  "endorsing_reward_per_slot": "2604", "cost_per_byte": "250",
  "hard_storage_limit_per_operation": "60000", "quorum_min": 2000,
  "quorum_max": 7000, "min_proposal_quorum": 500,
  "liquidity_baking_subsidy": "2500000",
  "liquidity_baking_sunset_level": 128,
  "liquidity_baking_toggle_ema_threshold": 1000000000,
  "max_operations_time_to_live": 120, "minimal_block_delay": "1",
  "delay_increment_per_round": "1", "consensus_committee_size": 256,
  "consensus_threshold": 0,
  "minimal_participation_ratio": { "numerator": 2, "denominator": 3 },
  "max_slashing_period": 2, "frozen_deposits_percentage": 5,
  "double_baking_punishment": "640000000",
  "ratio_of_frozen_deposits_slashed_per_double_endorsement":
    { "numerator": 1, "denominator": 2 }, "cache_script_size": 100000000,
  "cache_stake_distribution_cycles": 8, "cache_sampler_state_cycles": 8,
  "tx_rollup_enable": true, "tx_rollup_origination_size": 4000,
  "tx_rollup_hard_size_limit_per_inbox": 500000,
  "tx_rollup_hard_size_limit_per_message": 5000,
  "tx_rollup_max_withdrawals_per_batch": 15,
  "tx_rollup_commitment_bond": "10000000000",
  "tx_rollup_finality_period": 40000, "tx_rollup_withdraw_period": 40000,
  "tx_rollup_max_inboxes_count": 40100,
  "tx_rollup_max_messages_per_inbox": 1010,
  "tx_rollup_max_commitments_count": 80100,
  "tx_rollup_cost_per_byte_ema_factor": 120,
  "tx_rollup_max_ticket_payload_size": 2048,
  "tx_rollup_rejection_max_proof_size": 30000,
  "tx_rollup_sunset_level": 3473409, "sc_rollup_enable": false,
  "sc_rollup_origination_size": 6314,
  "sc_rollup_challenge_window_in_blocks": 20160,
  "sc_rollup_max_available_messages": 1000000 }
  |jkt}
  | Protocol.Alpha, Protocol.Constants_sandbox ->
    {alp|
{ "bootstrap_accounts":
    [ [ "edpkuBknW28nW72KG6RoHtYW7p12T6GKc7nAbwYX5m8Wd9sDVC9yav",
        "4000000000000" ],
      [ "edpktzNbDAUjUk697W7gYg2CRuBQjyPxbEg8dLccYYwKSKvkPvjtV9",
        "4000000000000" ],
      [ "edpkuTXkJDGcFd5nh6VvMz8phXxU3Bi7h6hqgywNFi1vZTfQNnS1RV",
        "4000000000000" ],
      [ "edpkuFrRoDSEbJYgxRtLx2ps82UdaYc1WwfS9sE11yhauZt5DgCHbU",
        "4000000000000" ],
      [ "edpkv8EUUH68jmo3f7Um5PezmfGrRF24gnfLpH3sVNwJnV5bVCxL2n",
        "4000000000000" ] ], "preserved_cycles": 2, "blocks_per_cycle": 8,
  "blocks_per_commitment": 4, "blocks_per_stake_snapshot": 4,
  "cycles_per_voting_period": 8, "hard_gas_limit_per_operation": "1040000",
  "hard_gas_limit_per_block": "5200000", "proof_of_work_threshold": "-1",
  "tokens_per_roll": "6000000000", "seed_nonce_revelation_tip": "125000",
  "origination_size": 257, "baking_reward_fixed_portion": "333333",
  "baking_reward_bonus_per_slot": "3921",
  "endorsing_reward_per_slot": "2604", "cost_per_byte": "250",
  "hard_storage_limit_per_operation": "60000", "quorum_min": 2000,
  "quorum_max": 7000, "min_proposal_quorum": 500,
  "liquidity_baking_subsidy": "2500000",
  "liquidity_baking_sunset_level": 128,
  "liquidity_baking_toggle_ema_threshold": 1000000000,
  "max_operations_time_to_live": 120, "minimal_block_delay": "1",
  "delay_increment_per_round": "1", "consensus_committee_size": 256,
  "consensus_threshold": 0,
  "minimal_participation_ratio": { "numerator": 2, "denominator": 3 },
  "max_slashing_period": 2, "frozen_deposits_percentage": 5,
  "double_baking_punishment": "640000000",
  "ratio_of_frozen_deposits_slashed_per_double_endorsement":
    { "numerator": 1, "denominator": 2 }, "cache_script_size": 100000000,
  "cache_stake_distribution_cycles": 8, "cache_sampler_state_cycles": 8,
  "tx_rollup_enable": true, "tx_rollup_origination_size": 4000,
  "tx_rollup_hard_size_limit_per_inbox": 500000,
  "tx_rollup_hard_size_limit_per_message": 5000,
  "tx_rollup_max_withdrawals_per_batch": 15,
  "tx_rollup_commitment_bond": "10000000000",
  "tx_rollup_finality_period": 40000, "tx_rollup_withdraw_period": 40000,
  "tx_rollup_max_inboxes_count": 40100,
  "tx_rollup_max_messages_per_inbox": 1010,
  "tx_rollup_max_commitments_count": 80100,
  "tx_rollup_cost_per_byte_ema_factor": 120,
  "tx_rollup_max_ticket_payload_size": 2048,
  "tx_rollup_rejection_max_proof_size": 30000,
  "tx_rollup_sunset_level": 3473409, "sc_rollup_enable": false,
  "sc_rollup_origination_size": 6314,
  "sc_rollup_challenge_window_in_blocks": 20160,
  "sc_rollup_max_available_messages": 1000000,
  "sc_rollup_stake_amount_in_mutez": 32000000,
  "sc_rollup_commitment_frequency_in_blocks": 30,
  "sc_rollup_commitment_storage_size_in_bytes": 84,
  "sc_rollup_max_lookahead_in_blocks": 30000 }
  |alp}
  | Protocol.Alpha, Protocol.Constants_mainnet ->
    {alp|
{ "bootstrap_accounts":
    [ [ "edpkuBknW28nW72KG6RoHtYW7p12T6GKc7nAbwYX5m8Wd9sDVC9yav",
        "4000000000000" ],
      [ "edpktzNbDAUjUk697W7gYg2CRuBQjyPxbEg8dLccYYwKSKvkPvjtV9",
        "4000000000000" ],
      [ "edpkuTXkJDGcFd5nh6VvMz8phXxU3Bi7h6hqgywNFi1vZTfQNnS1RV",
        "4000000000000" ],
      [ "edpkuFrRoDSEbJYgxRtLx2ps82UdaYc1WwfS9sE11yhauZt5DgCHbU",
        "4000000000000" ],
      [ "edpkv8EUUH68jmo3f7Um5PezmfGrRF24gnfLpH3sVNwJnV5bVCxL2n",
        "4000000000000" ] ], "preserved_cycles": 5, "blocks_per_cycle": 8192,
  "blocks_per_commitment": 64, "blocks_per_stake_snapshot": 512,
  "cycles_per_voting_period": 5, "hard_gas_limit_per_operation": "1040000",
  "hard_gas_limit_per_block": "5200000",
  "proof_of_work_threshold": "70368744177663",
  "tokens_per_roll": "6000000000", "seed_nonce_revelation_tip": "125000",
  "origination_size": 257, "baking_reward_fixed_portion": "10000000",
  "baking_reward_bonus_per_slot": "4286",
  "endorsing_reward_per_slot": "2857", "cost_per_byte": "250",
  "hard_storage_limit_per_operation": "60000", "quorum_min": 2000,
  "quorum_max": 7000, "min_proposal_quorum": 500,
  "liquidity_baking_subsidy": "2500000",
  "liquidity_baking_sunset_level": 3063809,
  "liquidity_baking_toggle_ema_threshold": 1000000000,
  "max_operations_time_to_live": 120, "minimal_block_delay": "30",
  "delay_increment_per_round": "15", "consensus_committee_size": 7000,
  "consensus_threshold": 4667,
  "minimal_participation_ratio": { "numerator": 2, "denominator": 3 },
  "max_slashing_period": 2, "frozen_deposits_percentage": 10,
  "double_baking_punishment": "640000000",
  "ratio_of_frozen_deposits_slashed_per_double_endorsement":
    { "numerator": 1, "denominator": 2 }, "cache_script_size": 100000000,
  "cache_stake_distribution_cycles": 8, "cache_sampler_state_cycles": 8,
  "tx_rollup_enable": true, "tx_rollup_origination_size": 4000,
  "tx_rollup_hard_size_limit_per_inbox": 500000,
  "tx_rollup_hard_size_limit_per_message": 5000,
  "tx_rollup_max_withdrawals_per_batch": 15,
  "tx_rollup_commitment_bond": "10000000000",
  "tx_rollup_finality_period": 40000, "tx_rollup_withdraw_period": 40000,
  "tx_rollup_max_inboxes_count": 40100,
  "tx_rollup_max_messages_per_inbox": 1010,
  "tx_rollup_max_commitments_count": 80100,
  "tx_rollup_cost_per_byte_ema_factor": 120,
  "tx_rollup_max_ticket_payload_size": 2048,
  "tx_rollup_rejection_max_proof_size": 30000,
  "tx_rollup_sunset_level": 3473409, "sc_rollup_enable": false,
  "sc_rollup_origination_size": 6314,
  "sc_rollup_challenge_window_in_blocks": 20160,
  "sc_rollup_max_available_messages": 1000000,
  "sc_rollup_stake_amount_in_mutez": 32000000,
  "sc_rollup_commitment_frequency_in_blocks": 30,
  "sc_rollup_commitment_storage_size_in_bytes": 84,
  "sc_rollup_max_lookahead_in_blocks": 30000 }
  |alp}
  | Protocol.Alpha, Protocol.Constants_test ->
    {alp|
{ "bootstrap_accounts":
    [ [ "edpkuBknW28nW72KG6RoHtYW7p12T6GKc7nAbwYX5m8Wd9sDVC9yav",
        "4000000000000" ],
      [ "edpktzNbDAUjUk697W7gYg2CRuBQjyPxbEg8dLccYYwKSKvkPvjtV9",
        "4000000000000" ],
      [ "edpkuTXkJDGcFd5nh6VvMz8phXxU3Bi7h6hqgywNFi1vZTfQNnS1RV",
        "4000000000000" ],
      [ "edpkuFrRoDSEbJYgxRtLx2ps82UdaYc1WwfS9sE11yhauZt5DgCHbU",
        "4000000000000" ],
      [ "edpkv8EUUH68jmo3f7Um5PezmfGrRF24gnfLpH3sVNwJnV5bVCxL2n",
        "4000000000000" ] ],
  "commitments":
    [ [ "btz1bRL4X5BWo2Fj4EsBdUwexXqgTf75uf1qa", "23932454669343" ],
      [ "btz1SxjV1syBgftgKy721czKi3arVkVwYUFSv", "72954577464032" ],
      [ "btz1LtoNCjiW23txBTenALaf5H6NKF1L3c1gw", "217487035428348" ],
      [ "btz1SUd3mMhEBcWudrn8u361MVAec4WYCcFoy", "4092742372031" ],
      [ "btz1MvBXf4orko1tsGmzkjLbpYSgnwUjEe81r", "17590039016550" ],
      [ "btz1LoDZ3zsjgG3k3cqTpUMc9bsXbchu9qMXT", "26322312350555" ],
      [ "btz1RMfq456hFV5AeDiZcQuZhoMv2dMpb9hpP", "244951387881443" ],
      [ "btz1Y9roTh4A7PsMBkp8AgdVFrqUDNaBE59y1", "80065050465525" ],
      [ "btz1Q1N2ePwhVw5ED3aaRVek6EBzYs1GDkSVD", "3569618927693" ],
      [ "btz1VFFVsVMYHd5WfaDTAt92BeQYGK8Ri4eLy", "9034781424478" ] ],
  "preserved_cycles": 2, "blocks_per_cycle": 8, "blocks_per_commitment": 4,
  "blocks_per_stake_snapshot": 4, "cycles_per_voting_period": 8,
  "hard_gas_limit_per_operation": "1040000",
  "hard_gas_limit_per_block": "5200000", "proof_of_work_threshold": "-1",
  "tokens_per_roll": "6000000000", "seed_nonce_revelation_tip": "125000",
  "origination_size": 257, "baking_reward_fixed_portion": "333333",
  "baking_reward_bonus_per_slot": "3921",
  "endorsing_reward_per_slot": "2604", "cost_per_byte": "250",
  "hard_storage_limit_per_operation": "60000", "quorum_min": 2000,
  "quorum_max": 7000, "min_proposal_quorum": 500,
  "liquidity_baking_subsidy": "2500000",
  "liquidity_baking_sunset_level": 128,
  "liquidity_baking_toggle_ema_threshold": 1000000000,
  "max_operations_time_to_live": 120, "minimal_block_delay": "1",
  "delay_increment_per_round": "1", "consensus_committee_size": 256,
  "consensus_threshold": 0,
  "minimal_participation_ratio": { "numerator": 2, "denominator": 3 },
  "max_slashing_period": 2, "frozen_deposits_percentage": 5,
  "double_baking_punishment": "640000000",
  "ratio_of_frozen_deposits_slashed_per_double_endorsement":
    { "numerator": 1, "denominator": 2 }, "cache_script_size": 100000000,
  "cache_stake_distribution_cycles": 8, "cache_sampler_state_cycles": 8,
  "tx_rollup_enable": true, "tx_rollup_origination_size": 4000,
  "tx_rollup_hard_size_limit_per_inbox": 500000,
  "tx_rollup_hard_size_limit_per_message": 5000,
  "tx_rollup_max_withdrawals_per_batch": 15,
  "tx_rollup_commitment_bond": "10000000000",
  "tx_rollup_finality_period": 40000, "tx_rollup_withdraw_period": 40000,
  "tx_rollup_max_inboxes_count": 40100,
  "tx_rollup_max_messages_per_inbox": 1010,
  "tx_rollup_max_commitments_count": 80100,
  "tx_rollup_cost_per_byte_ema_factor": 120,
  "tx_rollup_max_ticket_payload_size": 2048,
  "tx_rollup_rejection_max_proof_size": 30000,
  "tx_rollup_sunset_level": 3473409, "sc_rollup_enable": false,
  "sc_rollup_origination_size": 6314,
  "sc_rollup_challenge_window_in_blocks": 20160,
  "sc_rollup_max_available_messages": 1000000,
  "sc_rollup_stake_amount_in_mutez": 32000000,
  "sc_rollup_commitment_frequency_in_blocks": 30,
  "sc_rollup_commitment_storage_size_in_bytes": 84,
  "sc_rollup_max_lookahead_in_blocks": 30000 }
  |alp}
;;

open Tezos_stdlib_unix.Lwt_utils_unix

let make_path protocol =
  let d = Protocol.directory protocol in
  let p = Format.asprintf "_build/%s" d in
  let open Lwt.Syntax in
  let* () = create_dir p in
  create_dir @@ Filename.concat p "parameters"
;;

let write_params protocol ctx =
  let f = Protocol.parameter_file ~constants:ctx protocol in
  create_file f @@ from_protocol protocol ctx
;;

let gen () =
  let open Lwt.Syntax in
  let* () = make_path Protocol.Ithaca in
  let* () = write_params Protocol.Ithaca Protocol.Constants_sandbox in
  let* () = write_params Protocol.Ithaca Protocol.Constants_test in
  let* () = write_params Protocol.Ithaca Protocol.Constants_mainnet in
  let* () = make_path Protocol.Jakarta in
  let* () = write_params Protocol.Jakarta Protocol.Constants_sandbox in
  let* () = write_params Protocol.Jakarta Protocol.Constants_test in
  let* () = write_params Protocol.Jakarta Protocol.Constants_mainnet in
  let* () = make_path Protocol.Alpha in
  let* () = write_params Protocol.Alpha Protocol.Constants_sandbox in
  let* () = write_params Protocol.Alpha Protocol.Constants_test in
  let* () = write_params Protocol.Alpha Protocol.Constants_mainnet in
  Lwt.return_unit
;;
